{"ast":null,"code":"//lấy sinh viên \nexport const fetchSinhVienAction = () => {\n  return async dispatch => {\n    try {\n      const response = await fetch('http://localhost:3001/students');\n      // định nghĩa data nhận về từ API \n      const data = await response.json();\n      dispatch({\n        type: 'get-sv',\n        payload: {\n          sinhviens: data,\n          loading: false,\n          error: null\n        }\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};\nexport function addStudent(sv) {\n  return async dispatch => {\n    try {\n      const response = await fetch('http://localhost:3001/students', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(sv)\n      });\n      // định nghĩa data nhận về từ API \n      if (!response.ok) {\n        console.log('Errror');\n      }\n      const data = await response.json();\n      dispatch({\n        type: 'add-sv',\n        payload: data\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n}\nexport function deleteStudent(sv) {\n  return async dispatch => {\n    try {\n      const response = await fetch('http://localhost:3001/students', {\n        method: 'DELETE'\n      });\n      // định nghĩa data nhận về từ API \n      if (!response.ok) {\n        console.log('Errror');\n      }\n      const data = await response.json();\n      dispatch({\n        type: 'xoa-sv',\n        payload: sv\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n}\nexport const loadingStudent = function () {\n  let loading = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  return dispatch => {\n    dispatch({\n      type: 'loading-sv',\n      payload: loading\n    });\n  };\n};","map":{"version":3,"names":["fetchSinhVienAction","dispatch","response","fetch","data","json","type","payload","sinhviens","loading","error","console","log","addStudent","sv","method","headers","body","JSON","stringify","ok","deleteStudent","loadingStudent","arguments","length","undefined"],"sources":["/Users/hoangthang/Desktop/react/WD17307_WEB209/src/store/student/action.ts"],"sourcesContent":["import { type } from \"os\"\nimport { AddStudentDispatchType, DeleteStudentDispatchType, GetListDispatchType, LoadingDispatchType } from \"./type\"\n\nexport interface IStudent {\n    id : number,\n    name :string,\n    birth: number   \n}\n\ninterface IGetListStudentPayLoad {\n    sinhviens : IStudent[],\n    loading : boolean,\n    error: unknown\n}\n\nexport type GetListStudentAction = {\n    type: 'get-sv',\n    payload : IGetListStudentPayLoad\n}\nexport type AddStudentAction = {\n    type: 'add-sv',\n    payload :IStudent\n}\nexport type LoadingStudentAction = {\n    type:'loading-sv',\n    payload : boolean\n}\nexport type DeleteStudentAction = {\n    type : 'xoa-sv',\n    payload : IStudent\n}\n\n//lấy sinh viên \nexport const fetchSinhVienAction = () => {\n    return async (dispatch : GetListDispatchType) => {\n        try {\n            const response = await fetch('http://localhost:3001/students');\n            // định nghĩa data nhận về từ API \n            const data : IStudent[] = await response.json();\n            dispatch({\n                type : 'get-sv',\n                payload : {\n                    sinhviens : data,\n                    loading : false,\n                    error : null\n                }\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n}\nexport function addStudent(sv :IStudent) {\n    return async (dispatch : AddStudentDispatchType) => {\n        try {\n            const response = await fetch('http://localhost:3001/students',{\n                method : 'POST',\n                headers : {\n                    'Content-Type' : 'application/json'\n                },\n                body : JSON.stringify(sv)\n            });\n            // định nghĩa data nhận về từ API \n            if(!response.ok) {\n                console.log('Errror');\n            }\n             const data = await response.json();\n            dispatch({\n                type : 'add-sv',\n                payload : data\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n} \n\nexport function deleteStudent(sv :IStudent) {\n    return async (dispatch : DeleteStudentDispatchType) => {\n        try {\n            const response = await fetch('http://localhost:3001/students',{\n                method : 'DELETE',\n            \n            });\n            // định nghĩa data nhận về từ API \n            if(!response.ok) {\n                console.log('Errror');\n            }\n             const data = await response.json();\n            dispatch({\n                type : 'xoa-sv',\n                payload : sv\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n} \n\nexport const loadingStudent = (loading = false) => {\n    return (dispatch : LoadingDispatchType) => {\n        dispatch({\n            type : 'loading-sv',\n            payload :loading\n        })\n    }\n}"],"mappings":"AAgCA;AACA,OAAO,MAAMA,mBAAmB,GAAGA,CAAA,KAAM;EACrC,OAAO,MAAOC,QAA8B,IAAK;IAC7C,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,gCAAgC,CAAC;MAC9D;MACA,MAAMC,IAAiB,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;MAC/CJ,QAAQ,CAAC;QACLK,IAAI,EAAG,QAAQ;QACfC,OAAO,EAAG;UACNC,SAAS,EAAGJ,IAAI;UAChBK,OAAO,EAAG,KAAK;UACfC,KAAK,EAAG;QACZ;MACJ,CAAC,CAAC;IACN,CAAC,CAAC,OAAOA,KAAK,EAAE;MACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACtB;EACJ,CAAC;AACL,CAAC;AACD,OAAO,SAASG,UAAUA,CAACC,EAAY,EAAE;EACrC,OAAO,MAAOb,QAAiC,IAAK;IAChD,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,gCAAgC,EAAC;QAC1DY,MAAM,EAAG,MAAM;QACfC,OAAO,EAAG;UACN,cAAc,EAAG;QACrB,CAAC;QACDC,IAAI,EAAGC,IAAI,CAACC,SAAS,CAACL,EAAE;MAC5B,CAAC,CAAC;MACF;MACA,IAAG,CAACZ,QAAQ,CAACkB,EAAE,EAAE;QACbT,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;MACzB;MACC,MAAMR,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;MACnCJ,QAAQ,CAAC;QACLK,IAAI,EAAG,QAAQ;QACfC,OAAO,EAAGH;MACd,CAAC,CAAC;IACN,CAAC,CAAC,OAAOM,KAAK,EAAE;MACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACtB;EACJ,CAAC;AACL;AAEA,OAAO,SAASW,aAAaA,CAACP,EAAY,EAAE;EACxC,OAAO,MAAOb,QAAoC,IAAK;IACnD,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,gCAAgC,EAAC;QAC1DY,MAAM,EAAG;MAEb,CAAC,CAAC;MACF;MACA,IAAG,CAACb,QAAQ,CAACkB,EAAE,EAAE;QACbT,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;MACzB;MACC,MAAMR,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;MACnCJ,QAAQ,CAAC;QACLK,IAAI,EAAG,QAAQ;QACfC,OAAO,EAAGO;MACd,CAAC,CAAC;IACN,CAAC,CAAC,OAAOJ,KAAK,EAAE;MACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACtB;EACJ,CAAC;AACL;AAEA,OAAO,MAAMY,cAAc,GAAG,SAAAA,CAAA,EAAqB;EAAA,IAApBb,OAAO,GAAAc,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;EAC1C,OAAQtB,QAA8B,IAAK;IACvCA,QAAQ,CAAC;MACLK,IAAI,EAAG,YAAY;MACnBC,OAAO,EAAEE;IACb,CAAC,CAAC;EACN,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}